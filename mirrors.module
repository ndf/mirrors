<?php

/**
 * @file
 * Creates an Export View and an Import Feed for your entities
 */

/**
 * Per entity-bundle a feed importer and a views-exporter will be created.
 *
 * Logic:
 * 1. Function that returns fields and properties for supported bundles.
 * 2. Function that creates feed-configurations.
 * 3. Function that creates view-configurations.
 */

/**
 * Default separator is used in multivalue list-fields.
 */
define('MIRRORS_DEFAULT_SEPARATOR', '/');

/**
 * Implements hook_permission().
 */
function mirrors_permission() {
  return array(
    'administer mirrors' => array(
      'title' => t('Administer mirrors'),
      'description' => t('Use mirrors export-views.'),
    ),
  );
}

/**
 * Implements hook_menu().
 */
function mirrors_menu() {
  $items = array();
  $items['admin/structure/mirrors'] = array(
    'title'             => 'Mirrors',
    'description'       => 'Manage Mirrors settings for each bundle.',
    'page callback'     => 'mirrors_admin_page',
    'access arguments'  => array('administer mirrors'),
    'file'              => 'mirrors.admin.inc',
  );
  return $items;
}

/**
 * Implements hook_views_api().
 */
function mirrors_views_api() {
  return array('api' => 3);
}

/**
 * Implements hook_ctools_plugin_api().
 */
function mirrors_ctools_plugin_api() {
  list($module, $api) = func_get_args();
  if ($module == 'feeds' && $api == 'feeds_importer_default') {
    return array('version' => 1);
  }
  if ($module == "feeds_tamper" && $api == "feeds_tamper_default") {
    return array("version" => "2");
  }
}
